@using ECommerce.Model.Models
@{
    ViewData["Title"] = "ShoppingCart";
    Layout = "~/Views/Shared/_EmptyLayout.cshtml";
}

@model ShoppingCart


<html lang="en">
<head>
    <partial name="_HeaderPartial" />

</head>
<body class="bg-gray-100 font-bold text-black work-sans leading-normal text-base tracking-normal">
    <!--Nav-->
    <partial name="_NavPartial" />


    <div class="container mx-auto mt-10 p-6"></div>
    <partial name="_NotificationPartial" />
        <h2 class="text-2xl font-bold text-gray-800 mb-6 ml-4">Shopping Cart</h2>

        <!-- Shopping Cart Container -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-4 ml-3 mr-3">
            <div class="grid grid-cols-1 gap-4">

                <!-- Product Card -->
                @foreach(var item in Model.ShoppingCartItems)
                {
                    <div class="flex items-center border-b pb-4 mb-4">
                        <div class="border-gray-50  border-4 border-spacing-10 py-5 px-5 bg-white rounded-xl shadow-xl hover:shadow-2xl">
                            <img src="~/public/image/Photo.jpg" alt="Product Image" class=" object-cover  w-36 max-w-xs h-auto rounded-lg">

                        </div>
                        <div class="ml-4">
                        <h3 class="text-lg font-semibold text-gray-800">@item.Product.Name</h3>
                        <p class="text-gray-600">$@item.Product.Price</p>
                        <p class="text-gray-600">Quantity @item.Quantity</p>

                        </div>
                    <a asp-action="RemoveFromCart" asp-route-id="@item.ProductId" class="ml-auto text-red-600 hover:text-red-500">Remove</a>
                    </div>
                }

                

            
            </div>

            <div >
                <h3 class="text-center text-lg font-semibold ">Checkout Detail</h3>
                <p class="text-center text-gray-600">Total Price:</p>
                <p class="mt-2 text-center text-gray-600">$@Model.TotalAmount</p>
                <br>
                
            </div>

            <div class="mt-6 flex justify-between">

                <!-- Total Price -->
                
                @if(Model.ShoppingCartItems.Count > 0)
            {
                <a asp-action="CheckOut" asp-controller="Order" class="border border-teal-600 text-teal-600 px-4 py-2 rounded-lg hover:bg-teal-600 hover:text-white transition duration-200">
                    Checkout
                </a>
                <a asp-action="ClearCart" class="text-sm font-semibold leading-6 text-gray-900 hover:text-teal-600" onclick="clearCart()">Clear Cart</a>
            }
            else
            {
                <a asp-action="CheckOut" asp-controller="Order" class="border border-teal-600 cursor-not-allowed text-gray-900 px-4 py-2 rounded-lg hover\:bg-gray-100 opacity-50 pointer-events-none hover:text-gray-900 transition duration-200">
                    Checkout
                </a>
                <a asp-action="ClearCart" class="text-sm font-semibold leading-6 text-gray-900 hover:text-teal-600 transition duration-200 cursor-not-allowed opacity-50 hover:opacity-50 opacity-50 pointer-events-none">
                    Clear Cart
                </a>

            }
           
            </div>
        </div>
    </div>

    <partial name="_FooterPartial" />

    <script>
        function removeItem(button) {
            const productCard = button.closest('.flex');
            productCard.remove();
        }

        function clearCart() {
            const cartContainer = document.querySelector('.bg-white');
            const products = cartContainer.querySelectorAll('.flex');
            products.forEach(product => product.remove());
        }
    </script>
   	 




    
    


</body>
</html>